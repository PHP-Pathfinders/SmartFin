nelmio_api_doc:
  documentation:
    info:
      title: SmartFin
      description: Your ultimate financial dashboard with intuitive tools for smart financial management
      version: 1.0.0
    tags:
      - name: "Budgets"
        description: "These are all of the endpoints that have to do with budgets"
      - name: "Overview"
        description: "API endpoints used for overview page"
      - name: "Categories"
        description: "These are all of the endpoints that have to do with categories"
      - name: "Transactions"
        description: "These are all of the endpoints that have to do with transactions"
      - name: "Transaction Templates"
        description: "These are all of the endpoints that have to do with transaction templates"
      - name: "Entry Points"
        description: "These are the main entry points for out site"
      - name: "User"
        description: "These are all of the endpoints that have to do with user"
      - name: "Exports"
        description: "Everything that has to do with exporting or viewing the exported files"
      - name: "Mailer"
        description: "Mailer service used for sending emails"
      - name: "Generators"
        description: "PDF and XLS file generators"
    components:
      securitySchemes:
        Bearer:
          type: http
          scheme: bearer
          bearerFormat: JWT

      schemas:
        QuerySuccessResponse:
          type: object
          properties:
            success:
              type: boolean
            data:
              type: object
              properties:
                pagination:
                  type: object
                  properties:
                    currentPage:
                      type: string
                      example: '1'
                    previousPage:
                      type: integer
                      example: null
                    nextPage:
                      type: integer
                      example: null
                    totalPages:
                      type: integer
                      example: 1
        Budget:
          allOf:
            - $ref: '#/components/schemas/QuerySuccessResponse'
            - type: object
              properties:
                data:
                  properties:
                    budgets:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            example: 2
                          monthlyBudget:
                            example: 1758.14
                          monthlyBudgetDate:
                            example: "2024-07-23T00:00:00+00:00"
                          categoryID:
                            example: 9
                          categoryName:
                            example: "Nights out"
                          color:
                            example: "#607D8B"
                          total:
                            example: 5876.911
                          percent:
                            example: 334.2686589236352
        FailedAction:
          type: object
          properties:
            success:
              type: boolean
              example: false
        SuccessfulAction:
          type: object
          properties:
            success:
              type: boolean
              example: true
        BudgetNotFound:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "Budget not found"
        BudgetsNotFound:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "Budgets not found"
        InputError:
          type: object
          properties:
            success:
              type: boolean
              example: false
        BudgetDateError:
          allOf:
            - $ref: '#/components/schemas/InputError'
            - type: object
              properties:
                errors:
                  type: array
                  items:
                    properties:
                      field:
                        example: "dateStart"
                      message:
                        example: "Given date must be in format YYYY-MM-DD"
                      code:
                        example: "69819696-02ac-4a99-9ff0-14e127c4d1bc"
        YearInputError:
          allOf:
            - $ref: '#/components/schemas/InputError'
            - type: object
              properties:
                errors:
                  type: array
                  items:
                    properties:
                      field:
                        example: "year"
                      message:
                        example: "'da' is not an integer."
                      code:
                        example: "integer_type"
        BudgetInputError:
          allOf:
            - $ref: '#/components/schemas/InputError'
            - type: object
              properties:
                errors:
                  type: array
                  items:
                    properties:
                      field:
                        type: string
                        example: "categoryId"
                      message:
                        type: string
                        example: "0 is not a positive number"
                      code:
                        type: string
                        format: string
                        example: "positive_number"
        BudgetInputSuccess:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
            - type: object
              properties:
                message:
                  example: "New budget created"
        BudgetInputFail:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "Invalid category given"
        BudgetConflict:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "You already have a budget for this category in given month"
        BudgetUpdateSuccess:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
            - type: object
              properties:
                message:
                  example: "Update successful"
        BudgetUpdateFail:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "Category could not be found"
        BudgetDeleteSuccess:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
            - type: object
              properties:
                message:
                  example: "Budget with id 1 has been deleted"
        BudgetDeleteFail:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "Budget not found or not owned by you"
        BudgetRandomResult:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
            - type: object
              properties:
                data:
                  type: array
                  items:
                    properties:
                      id:
                        example: 33
                      monthlyBudget:
                        example: 2607.71
                      monthlyBudgetDate:
                        example: "2024-07-31T00:00:00+00:00"
                      categoryId:
                        example: 12
                      categoryName:
                        example: "Other"
                      color:
                        example: "#FF9800"
                      totalSpent:
                        example: 7868.837
                      percentageSpent:
                        example: 301.75276391930083
        Category:
          allOf:
            - $ref: '#/components/schemas/QuerySuccessResponse'
            - type: object
              properties:
                data:
                  properties:
                    categories:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 3
                          categoryName:
                            type: string
                            example: "Gift"
                          type:
                            type: string
                            enum: [ "income" ]
                            example: "income"
                          color:
                            type: string
                            example: "#2196F3"
        CategoryNotFound:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "No categories found"
        CategoryQueryError:
          allOf:
            - $ref: '#/components/schemas/InputError'
            - type: object
              properties:
                errors:
                  type: array
                  items:
                    properties:
                      field:
                        example: "page"
                      message:
                        example: "'123d' is not an integer."
                      code:
                        example: "integer_type"
        CategoryInputError:
          allOf:
            - $ref: '#/components/schemas/InputError'
            - type: object
              properties:
                errors:
                  type: array
                  items:
                    type: object
                    properties:
                      field:
                        example: "categoryName"
                      message:
                        example: "Category name must be provided and cannot be blank"
                      code:
                        example: "c1051bb4-d103-4f74-8988-acbcafc7fdc3"

        CategoryInputSuccess:
          type: object
          properties:
            success:
              type: boolean
              example: true
            message:
              type: string
              example: "New category created"
        CategoryUpdateSuccess:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
            - type: object
              properties:
                message:
                  example: "Update successful"
        CategoryForbidden:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
          type: object
          properties:
            message:
              example: "You cannot modify default category."
        CategoryDeleteSuccess:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
            - type: object
              properties:
                message:
                  example: "Category deleted with id=1"
        CategoryForbiddenDelete:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
          type: object
          properties:
            message:
              example: "You cannot delete default category."
        CategoryFailed:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "Category not found or does not belong to the user."
        Transaction:
          allOf:
            - $ref: '#/components/schemas/QuerySuccessResponse'
            - type: object
              properties:
                data:
                  properties:
                    totalResults:
                      example: 9
                    transactions:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            example: 23
                          paymentType:
                            example: "card"
                          transactionDate:
                            example: "2024-05-12T00:00:00+00:00"
                          moneyAmount:
                            example: 7328.199
                          transactionName:
                            example: "Beatae voluptatem."
                          partyName:
                            example: null
                          transactionNotes:
                            example: null
                          categoryID:
                            example: 12
                          type:
                            example: "expense"
                          categoryName:
                            example: "Other"
                          color:
                            example: "#FF9800"
        TransactionInputSuccess:
          type: object
          properties:
            success:
              type: boolean
              example: true
            message:
              type: string
              example: "New transaction created"
        TransactionConflict:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "Can't change income to expense and vice versa"
        TransactionDeleteSuccess:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
            - type: object
              properties:
                message:
                  example: "Transaction with id 1 has been deleted"
        TransactionNotFound:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "No transactions found"

        Template:
          allOf:
            - $ref: '#/components/schemas/QuerySuccessResponse'
            - type: object
              properties:
                data:
                  properties:
                    totalResults:
                      example: 9
                    transactionTemplates:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            example: 23
                          paymentType:
                            example: "card"
                          transactionDate:
                            example: "2024-05-12T00:00:00+00:00"
                          moneyAmount:
                            example: 7328.199
                          transactionName:
                            example: "Beatae voluptatem."
                          partyName:
                            example: null
                          transactionNotes:
                            example: null
                          categoryID:
                            example: 12
                          type:
                            example: "expense"
                          categoryName:
                            example: "Other"
                          color:
                            example: "#FF9800"
        TemplateNotFound:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "No transaction template found"
        TemplateInputSuccess:
          type: object
          properties:
            success:
              type: boolean
              example: true
            message:
              type: string
              example: "New transaction template created"
        TemplateDeletionError:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "Template not found or doesn't belong to you"
        TemplateDeleteSuccess:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
            - type: object
              properties:
                message:
                  example: "Transaction template with id 13 successfully deleted"
        LoginSuccess:
          type: object
          properties:
            token:
              example: "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImN0eSI6IkpXVCJ9.eyJpYXQiOjE3MjE4MTUwMDksImV4cCI6MTcyMTgxODYwOSwicm9sZXMiOlsiUk9MRV9VU0VSIl0sInVzZXJuYW1lIjoidXNlckBnbWFpbC5jb20iLCJ0b2tlbl92ZXJzaW9uIjowLCJ1c2VyX2lkIjoyfQ.oZIzxmsYs2SDVdcG0zb4JQH95F1Tap7D-PqpNzFFiqzjqpMn-SZCTZSpKBr2ddQZlW-p0-oJp1vfakedc0VgoUMkAJ1aEho7G5_P8jzuFqUwgb3PbxchJAWtx1Fqs4yKruu_mfT8-tT8PFg0NAOw0-WJ2qotWwL1NZYt-X2k4UH1pjLcz13blNyjx65okXo3V4XDO0aSyVeKsAxY4SCeM6yQ-8G3fUcvpGLIcVP4LS_YsSNhne0ec2nGTpRX5bFXhZrgcG6vzCY1N9NPs3I8PasmM1A8EerGTemO1jmRoqABrV7NM1Yta2HZ5YxyJ0-lK6mCdwkPzSXunrQUYSJMWA"
        RegisterSuccess:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
            - type: object
              properties:
                message:
                  example: "User registered successfully"
        Unauthorized:
          type: object
          properties:
            code:
              type: integer
              example: 401
            message:
              type: string
              example: "JWT Token not found"
        UnauthorizedLogin:
          type: object
          properties:
            code:
              type: integer
              example: 401
            message:
              type: string
              example: "Invalid credentials."
        RegisterInputError:
          allOf:
            - $ref: '#/components/schemas/InputError'
            - type: object
              properties:
                errors:
                  type: array
                  items:
                    properties:
                      field:
                        example: "email"
                      message:
                        example: "Email must be provided and cannot be blank"
                      code:
                        example: "c1051bb4-d103-4f74-8988-acbcafc7fdc3"
        RegisterEmailConflict:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "E-mail is already taken"
        InvalidRequest:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  type: string
                  example: "Request payload contains invalid \"json\" data."
        GeneratorPDFError:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  type: string
                  example: "You can only generate one PDF export every 24 hours."
        GeneratorXLSError:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  type: string
                  example: "You can only generate one XLSX export every 24 hours."
        ExportInvalidRequest:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  type: string
                  example: "File extension not found."
        Export:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
            - type: object
              properties:
                data:
                  type: array
                  items:
                    properties:
                      fileName:
                        example: "66a0e27ac64573.46940784.xlsx"
                      fileType:
                        example: "xlsx"
                      createdAt:
                        example: "2024-07-24T11:16:10+00:00"
        ExportsNotFound:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "Logged out successfully"
        Logout:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
            - type: object
              properties:
                message:
                  example: "Logged out successfully"
        UserNotFound:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "User not found"
        UserResetInputError:
            allOf:
              - $ref: '#/components/schemas/InputError'
              - type: object
                properties:
                  errors:
                    type: array
                    items:
                      properties:
                        field:
                          example: "token"
                        message:
                          example: "Token must be provided and cannot be blank"
                        code:
                          example: "c1051bb4-d103-4f74-8988-acbcafc7fdc3"
        User:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
            - type: object
              properties:
                data:
                  properties:
                    fullName:
                      example: "Jane Doe"
                    birthday:
                      example: "1993-06-29T00:00:00+00:00"
                    avatarFileName:
                      example: null
                    email:
                      example: "admin@gmail.com"
        UserUpdateSuccess:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
            - type: object
              properties:
                message:
                  example: "User updated successfully"
        ResetForbidden:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
          type: object
          properties:
            message:
              example: "Invalid reset password token"
        ExportsUserNotFound:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "Wrong user id or user not authenticated"
        ExportsFileNotFound:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "File not found"
        ExportsInputError:
          allOf:
            - $ref: '#/components/schemas/InputError'
            - type: object
              properties:
                errors:
                  type: array
                  items:
                    properties:
                      field:
                        example: "userId"
                      message:
                        example: "'da' is not an integer."
                      code:
                        example: "integer_type"
        MailerInputError:
          allOf:
            - $ref: '#/components/schemas/InputError'
            - type: object
              properties:
                errors:
                  type: array
                  items:
                    properties:
                      field:
                        example: "email"
                      message:
                        example: "This value is not a valid email address."
                      code:
                        example: "bd79c0ab-ddba-46cc-a703-a7a4b08de310"
        MailerSuccess:
          allOf:
            - $ref: '#/components/schemas/SuccessfulAction'
            - type: object
              properties:
                message:
                  example: "If your email exists in our system, you will receive a password reset email shortly"
        MailerTooMany:
          allOf:
            - $ref: '#/components/schemas/FailedAction'
            - type: object
              properties:
                message:
                  example: "Too many reset password requests, try again later..."
    security:
      - Bearer: [ ]
  areas: # to filter documented areas
    default:
      path_patterns: # an array of regexps (document only routes under /api, except /api/doc)
        - ^/api(?!/doc$)